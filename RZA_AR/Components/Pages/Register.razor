
@page "/Register"
@using RZA_AR.Models
@using RZA_AR.Services
@inject CustomerService CustomerService
@rendermode InteractiveServer

<h3>Register</h3>

<div>
    <label>First Name</label>
    <input @bind=newCustomer.Firstname>
</div>

<div>
    <label>Last Name</label>
    <input @bind=newCustomer.Lastname>
</div>

<div>
    <label>Username</label>
    <input @bind=newCustomer.Username>
</div>

<div>
    <label>Password</label>
    <input @bind=newCustomer.Password>
</div>

<div>
    <label>Email</label>
    <input>
</div>

<button @onclick=@RegisterCustomer>Register</button>


@code {
    private Customer newCustomer = new Customer();

    private async Task RegisterCustomer()
    {
        await CustomerService.AddCustomerAsync(newCustomer);

        bool usernameTaken = await CustomerService.CheckUsernameExistsAsync(newCustomer.Username);
        if (usernameTaken)
        {
            Console.WriteLine("Username taken");
        }
        else
        {
            await CustomerService.AddCustomerAsync(newCustomer);
            newCustomer = new Customer();
        }
    }

}